# 자동차 경주

### 목표
사용자 입력을 기반으로 n대의 자동차가 주어진 시도 횟수 동안 전진 조건에 따라 경주하고, 최종 우승자(복수 가능)를 출력하는 콘솔 애플리케이션을 개발한다.

### 환경
- **JDK**: 21 (Temurin)
- **빌드**: Gradle Wrapper (`./gradlew`)
- **입출력**: `camp.nextstep.edu.missionutils.Console.readLine()`
- **난수**: `camp.nextstep.edu.missionutils.Randoms.pickNumberInRange(0, 9)`

## 기능 요구사항
### 게임 규칙
- 경주는 입력된 **시도 횟수만큼 반복**된다.
- 각 라운드에서 모든 자동차는 다음 조건에 따라 **전진 여부**를 결정한다:
  - `pickNumberInRange(0, 9)` → 4 이상이면 전진, 아니면 정지
- 전진 시 `-`**(하이픈)** 1개를 추가하여 진행도를 표시한다.
- 라운드 결과는 **자동차 이름 + 진행도** 형식으로 출력된다.
- 모든 라운드가 끝난 후, 가장 많이 이동한 자동차(들)을 우승자로 판단한다.

### 입력
#### 자동차 이름 목록
- 쉼표(`,`)로 구분된 자동차 이름 목록을 입력받는다.
- 각 이름은 1자 이상, 5자 이하의 문자열이어야 한다.
- 다음 조건을 만족해야 한다:
  - 공백 또는 빈 문자열 불가
  - 중복된 이름 불가 → 동일한 이름이 둘 이상 존재하면 예외 발생

#### 시도 횟수 입력
- **1 이상의 정수**만 허용한다.
- 다음 입력은 허용하지 않는다:
  - 0 또는 음수 
  - 실수 
  - 숫자가 아닌 문자열

### 출력
#### 라운드별 결과
- 각 차수 결과는 **자동차 이름 + 전진한 `-` 개수**로 출력한다.
- 입력된 순서를 유지하며 다음과 같이 출력한다:
```
pobi : --
jun  : ---
```

#### 우승자 결과
- 우승자는 가장 많이 이동한 자동차(들)이며, **입력 순서대로** 쉼표로 구분하여 출력한다:
  - 단독: `최종 우승자 : pobi` 
  - 복수: `최종 우승자 : pobi, jun`

### 오류 처리
- 아래 조건을 위반하면 IllegalArgumentException이 발생하고 프로그램은 종료된다:
  - 자동차 이름이 공백/빈 값/중복/길이 초과
  - 시도 횟수가 1 미만이거나 정수가 아님
- System.exit() 사용 금지, 예외 발생 후 자연스럽게 종료되어야 한다.

## 프로그래밍 제약사항
| 항목       | 제약                                    |
| -------- | ------------------------------------- |
| 시작점      | `Application.main(String[] args)`     |
| 파일       | `build.gradle`, 패키지/파일명 변경 금지         |
| 들여쓰기     | **2 depth 이하만 허용**                    |
| 문법 금지    | **삼항 연산자 금지**                         |
| 메서드      | **단일 책임 원칙(한 가지 일만 수행)**              |
| 외부 라이브러리 | **추가 금지**                             |
| 종료 처리    | **`System.exit()` 금지**                  |
| 코딩 스타일   | **Java Style Guide** 준수 (공백, 포맷, 네이밍) |

## 기능 목록 요약
- 자동차 이름을 입력받고 유효성을 검증한다. (길이, 공백, 중복 불가)
- 시도 횟수를 입력받고 정수 여부를 검증한다.
- 자동차는 전진 여부를 판단해 이동한다. (난수 ≥ 4일 때)
- 이동 결과는 `-` 개수로 출력한다.
- 시도 횟수만큼 경주를 반복한다.
- 각 라운드 결과를 출력한다.
- 최종 우승자를 판단한다. (최대 이동 거리 기준)
- 공동 우승자가 있을 경우는 쉼표로 구분하여 입력 순서대로 출력한다.
- 모든 입력 예외 상황을 처리하고 프로그램을 종료한다.

## 구현 체크리스트
- [x] 자동차 이름은 1~5자이며, 중복/공백/빈 값은 허용하지 않는다.
- [x] 시도 횟수는 정수이며, 1 이상이어야 한다.
- [x] Car는 Engine에 의해 이동 여부를 결정한다.
- [x] Engine은 Rule을 주입받아 전진 조건을 판단한다.
- [x] Rule은 난수 기반으로 전진 조건을 정의한다.
- [x] Track은 경기의 한 바퀴 기준이 되는 길이(length)를 갖는다.
- [x] RacingGame은 시도 횟수만큼 경기를 반복하며, 각 라운드마다 Track 기준에 따라 Lap 결과를 기록한다.
- [x] RaceDirector는 Lap 상태를 출력하고, 마지막 결과 기준으로 우승자를 판단하여 출력한다.
- [x] 잘못된 입력값이 주어지면 `IllegalArgumentException`을 발생시킨다.
- [x] 프로그램 종료 시 `System.exit()`는 호출하지 않는다.

## 테스트 시나리오 목록
### CarTest
- [x] 이름이 1자 미만 또는 5자 초과이면 예외가 발생한다.
- [x] 공백/빈 문자열이면 예외가 발생한다.
- [x] 유효한 이름이면 자동차 객체가 생성된다.
- [x] Engine의 `isMovable()`이 `true`일 때 위치가 1 증가한다.
- [x] Engine의 `isMovable()`이 `false`일 때 위치는 유지된다.

### EngineTest
- [x] 난수가 4 이상이면 `true`, 미만이면 `false`를 반환한다.
- [x] `Randoms.pickNumberInRange(0, 9)` 호출 결과가 0~9 범위인지 검증한다.

### RuleTest
- [x] 입력값이 4 이상이면 `true`, 미만이면 `false`를 반환한다.

### AttemptsValidatorTest
- [x] `"5"` → `5` 반환된다.
- [x] `"0", "-3", "abc", ""` → `IllegalArgumentException` 발생한다.

### RacingGameTest
- [x] 시도 횟수만큼 각 Car.move()가 실행되며, 트랙 길이를 기준으로 distance와 lap 값이 올바르게 갱신된다.
- [x] 트랙 길이를 초과하면 lap가 1 증가하고 distance는 나머지로 정규화된다.
- [x] lap의 최대값이 가장 큰 자동차만 우승자로 반환한다.
- [x] lap의 최대값이 같은 경우 입력 순서를 유지한 공동 우승자를 반환한다.
- [x] `"pobi,pobi"`와 같이 중복된 이름의 자동차들이 등록되면 RacingGame 초기화 시 `IllegalArgumentException`이 발생한다.

### RaceDirectorTest
- [x] 주어진 자동차 목록과 시도 횟수, 트랙 길이에 따라 전체 레이스를 수행하고 RaceResult를 반환한다.
- [x] RaceResult에는 모든 라운드의 LapSnapshotGroup 이력과 우승자 목록이 포함된다.
- [x] 최종 우승자 리스트가 `"pobi,jun"` 형식으로 변환되어 OutputView에서 출력된다.